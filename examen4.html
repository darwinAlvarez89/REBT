<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Examen Test REBT 4</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RSH4ZW3VT2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-RSH4ZW3VT2');
  </script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    @media (prefers-reduced-motion: reduce) {
      * { animation-duration: .01ms !important; animation-iteration-count: 1 !important; transition-duration: .01ms !important; }
    }
  </style>

  <script>
    /* ===== Banco de preguntas + explicaciones ===== */
    const 
    




preguntas = [
  {
    "pregunta": "Seg√∫n el REBT, ¬øcu√°l es el objeto del Reglamento Electrot√©cnico para Baja Tensi√≥n?",
    "opciones": [
      "Establecer condiciones t√©cnicas y garant√≠as para preservar la seguridad, asegurar el funcionamiento normal y contribuir a la fiabilidad y eficiencia econ√≥mica de las instalaciones",
      "Regular exclusivamente la calidad est√©tica de las instalaciones el√©ctricas",
      "Determinar los impuestos sobre la energ√≠a consumida en las instalaciones",
      "Fijar los horarios de funcionamiento de las instalaciones el√©ctricas"
    ],
    "respuesta": "Establecer condiciones t√©cnicas y garant√≠as para preservar la seguridad, asegurar el funcionamiento normal y contribuir a la fiabilidad y eficiencia econ√≥mica de las instalaciones",
    "explicacion": "Art√≠culo¬†1: ¬´El presente Reglamento tiene por objeto establecer las condiciones t√©cnicas y garant√≠as que deben reunir las instalaciones el√©ctricas a fin de preservar la seguridad de las personas y los bienes, asegurar el normal funcionamiento de dichas instalaciones y prevenir las perturbaciones en otras instalaciones y servicios, y contribuir a la fiabilidad t√©cnica y a la eficiencia econ√≥mica de las instalaciones.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© l√≠mites de tensi√≥n definen el √°mbito de aplicaci√≥n del reglamento?",
    "opciones": [
      "Corriente alterna igual o inferior a 1.000¬†V y corriente continua igual o inferior a 1.500¬†V",
      "Corriente alterna igual o inferior a 500¬†V y corriente continua igual o inferior a 1.000¬†V",
      "Corriente alterna superior a 1.000¬†V y corriente continua superior a 1.500¬†V",
      "Solo corrientes alternas hasta 50¬†V"
    ],
    "respuesta": "Corriente alterna igual o inferior a 1.000¬†V y corriente continua igual o inferior a 1.500¬†V",
    "explicacion": "Art√≠culo¬†2: ¬´Este Reglamento se aplica a las instalaciones que‚Ä¶ trabajan en los l√≠mites de tensi√≥n siguientes: a) Corriente alterna: igual o inferior a 1.000¬†voltios; b) Corriente continua: igual o inferior a 1.500¬†voltios.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© se entiende por ‚Äòinstalaci√≥n‚Äô en el contexto del reglamento?",
    "opciones": [
      "Un conjunto de aparatos y circuitos asociados para la producci√≥n, conversi√≥n, transformaci√≥n, transmisi√≥n, distribuci√≥n o utilizaci√≥n de la energ√≠a el√©ctrica",
      "Un √∫nico equipo conectado a la red el√©ctrica para uso dom√©stico",
      "Solo el cableado de una vivienda sin aparatos",
      "Una colecci√≥n de dispositivos electr√≥nicos sin conexi√≥n entre s√≠"
    ],
    "respuesta": "Un conjunto de aparatos y circuitos asociados para la producci√≥n, conversi√≥n, transformaci√≥n, transmisi√≥n, distribuci√≥n o utilizaci√≥n de la energ√≠a el√©ctrica",
    "explicacion": "Art√≠culo¬†3: ¬´Instalaci√≥n: conjunto de aparatos y circuitos asociados para la producci√≥n, conversi√≥n, transformaci√≥n, transmisi√≥n, distribuci√≥n o utilizaci√≥n de la energ√≠a el√©ctrica.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© rango de tensi√≥n corresponde a la categor√≠a de ‚Äòmuy baja tensi√≥n‚Äô?",
    "opciones": [
      "‚â§ 50¬†V en corriente alterna o ‚ÄØ‚â§‚ÄØ75¬†V en corriente continua",
      "‚â• 50 ‚â§ 500¬†V en corriente alterna o ‚â• 75¬†‚â§ 750¬†V en corriente continua",
      "‚â• 500¬†‚â§ 1.000¬†V en corriente alterna o ‚â• 750 ‚â§‚ÄØ1.500¬†V en corriente continua",
      ">‚ÄØ1.500¬†V en corriente continua"
    ],
    "respuesta": "‚â§ 50¬†V en corriente alterna o ‚ÄØ‚â§‚ÄØ75¬†V en corriente continua",
    "explicacion": "Art√≠culo¬†4: ¬´Muy baja tensi√≥n: ‚ÄØ‚â§‚ÄØ50¬†V en corriente alterna o‚ÄØ‚â§‚ÄØ75¬†V en corriente continua. Tensi√≥n usual: 50¬†<¬†Un‚ÄØ‚â§‚ÄØ500¬†V en corriente alterna o 75¬†<¬†Un‚ÄØ‚â§‚ÄØ750¬†V en corriente continua. Tensi√≥n especial: 500¬†<¬†Un‚ÄØ‚â§‚ÄØ1.000¬†V en corriente alterna o 750¬†<¬†Un‚ÄØ‚â§‚ÄØ1.500¬†V en corriente continua.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øcu√°l es la frecuencia empleada en la red?",
    "opciones": [
      "50¬†Hz",
      "60¬†Hz",
      "45¬†Hz",
      "400¬†Hz"
    ],
    "respuesta": "50¬†Hz",
    "explicacion": "Art√≠culo¬†4: ¬´La frecuencia empleada en la red ser√° de 50¬†Hz.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© indicaciones m√≠nimas deben llevar los materiales y equipos el√©ctricos?",
    "opciones": [
      "La identificaci√≥n del fabricante o su representante, la marca y modelo, la tensi√≥n asignada y la potencia correspondiente",
      "√önicamente el pa√≠s de origen y la fecha de fabricaci√≥n",
      "Solo la marca comercial sin modelo ni tensiones",
      "El precio de venta al p√∫blico y la fecha de instalaci√≥n"
    ],
    "respuesta": "La identificaci√≥n del fabricante o su representante, la marca y modelo, la tensi√≥n asignada y la potencia correspondiente",
    "explicacion": "Art√≠culo¬†6: ¬´Los materiales y equipos‚Ä¶ deber√°n llevar, como indicaciones m√≠nimas, la identificaci√≥n del fabricante o de su representante, la marca y tipo o modelo, as√≠ como la tensi√≥n asignada y la potencia correspondiente y cualquier otra indicaci√≥n complementaria necesaria para su utilizaci√≥n.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© es un ‚Äòaislamiento reforzado‚Äô?",
    "opciones": [
      "Un aislamiento cuyas caracter√≠sticas mec√°nicas y el√©ctricas lo hacen equivalente a un aislamiento doble",
      "Un tipo de aislamiento provisional que requiere pintura protectora",
      "Un recubrimiento decorativo sin funci√≥n el√©ctrica",
      "Una toma de tierra espec√≠fica para sistemas monof√°sicos"
    ],
    "respuesta": "Un aislamiento cuyas caracter√≠sticas mec√°nicas y el√©ctricas lo hacen equivalente a un aislamiento doble",
    "explicacion": "ITC‚ÄëBT‚Äë01: ¬´Aislamiento reforzado: aislamiento cuyas caracter√≠sticas mec√°nicas y el√©ctricas lo hacen equivalente a un aislamiento doble.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øcu√°ndo se considera de alta sensibilidad un interruptor diferencial?",
    "opciones": [
      "Cuando la corriente diferencial‚Äëresidual asignada sea igual o inferior a 30¬†mA",
      "Cuando la corriente asignada sea superior a 300¬†mA",
      "Solo cuando su intensidad nominal supera los 63¬†A",
      "En todos los casos independientemente de su corriente diferencial"
    ],
    "respuesta": "Cuando la corriente diferencial‚Äëresidual asignada sea igual o inferior a 30¬†mA",
    "explicacion": "ITC‚ÄëBT‚Äë01: ¬´Alta sensibilidad: los interruptores diferenciales se consideran de alta sensibilidad cuando la corriente diferencial‚Äëresidual asignada sea inferior o igual a 30¬†mA.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqui√©n es considerado empresa instaladora en baja tensi√≥n?",
    "opciones": [
      "La persona f√≠sica o jur√≠dica que realiza, mantiene o repara instalaciones el√©ctricas y ha presentado la declaraci√≥n responsable correspondiente",
      "Cualquier usuario dom√©stico que realice peque√±as reparaciones en su vivienda",
      "Un organismo oficial de inspecci√≥n de instalaciones",
      "Un distribuidor de material el√©ctrico sin actividad de instalaci√≥n"
    ],
    "respuesta": "La persona f√≠sica o jur√≠dica que realiza, mantiene o repara instalaciones el√©ctricas y ha presentado la declaraci√≥n responsable correspondiente",
    "explicacion": "ITC‚ÄëBT‚Äë03: Apartado 2.1 ¬´Empresa instaladora en baja tensi√≥n: persona f√≠sica o jur√≠dica que realiza, mantiene o repara instalaciones el√©ctricas comprendidas en el √°mbito de aplicaci√≥n de este Reglamento, habiendo presentado la declaraci√≥n responsable que corresponda.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© tipo de instalaciones se incluyen entre las que pueden realizar las empresas instaladoras de categor√≠a especialista (IBTE)?",
    "opciones": [
      "Sistemas de automatizaci√≥n y gesti√≥n t√©cnica de la energ√≠a y seguridad para viviendas y edificios (dom√≥tica e inm√≥tica)",
      "√önicamente instalaciones de telecomunicaciones",
      "Mantenimiento de veh√≠culos de motor",
      "Solamente redes de telefon√≠a m√≥vil"
    ],
    "respuesta": "Sistemas de automatizaci√≥n y gesti√≥n t√©cnica de la energ√≠a y seguridad para viviendas y edificios (dom√≥tica e inm√≥tica)",
    "explicacion": "ITC‚ÄëBT‚Äë03: Apartado 3.2 ¬´Para la categor√≠a especialista se incluyen, adem√°s, las instalaciones de sistemas de automatizaci√≥n, gesti√≥n t√©cnica de la energ√≠a y seguridad para viviendas y edificios (dom√≥tica e inm√≥tica)‚Ä¶¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, cuando una instalaci√≥n requiere proyecto, ¬øqui√©n debe redactar y firmar dicho proyecto?",
    "opciones": [
      "Un t√©cnico titulado competente que ser√° responsable de que el proyecto se adapte a las disposiciones reglamentarias",
      "El propietario de la instalaci√≥n sin requisitos profesionales",
      "Cualquier empleado de la empresa suministradora",
      "Un organismo de control acreditado"
    ],
    "respuesta": "Un t√©cnico titulado competente que ser√° responsable de que el proyecto se adapte a las disposiciones reglamentarias",
    "explicacion": "ITC‚ÄëBT‚Äë04: Apartado 2.1 ¬´Cuando se precise proyecto‚Ä¶ √©ste deber√° ser redactado y firmado por t√©cnico titulado competente, quien ser√° directamente responsable de que el proyecto se adapte a las disposiciones reglamentarias.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øcada cu√°nto tiempo deben someterse a inspecci√≥n peri√≥dica las instalaciones en baja tensi√≥n que precisaron inspecci√≥n inicial?",
    "opciones": [
      "Cada 5¬†a√±os",
      "Cada 2¬†a√±os",
      "Cada 10¬†a√±os",
      "No requieren ninguna inspecci√≥n ulterior"
    ],
    "respuesta": "Cada 5¬†a√±os",
    "explicacion": "ITC‚ÄëBT‚Äë05: Apartado 4.2 ¬´Ser√°n objeto de inspecciones peri√≥dicas, cada 5¬†a√±os, todas las instalaciones el√©ctricas en baja tensi√≥n que precisaron inspecci√≥n inicial.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© significa la letra ‚ÄòS‚Äô en la designaci√≥n de esquemas de distribuci√≥n?",
    "opciones": [
      "Que las funciones de neutro y de protecci√≥n se aseguran mediante conductores separados",
      "Que el neutro y el conductor de protecci√≥n se unen en un √∫nico conductor",
      "Que no existe conductor de protecci√≥n",
      "Que se utilizan exclusivamente conductores aislados en tubos met√°licos"
    ],
    "respuesta": "Que las funciones de neutro y de protecci√≥n se aseguran mediante conductores separados",
    "explicacion": "ITC‚ÄëBT‚Äë08: Apartado 1 ¬´S¬†=¬†Las funciones de neutro y de protecci√≥n, aseguradas por conductores separados.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, al dimensionar las l√≠neas de alimentaci√≥n de alumbrado con l√°mparas de descarga, ¬øqu√© potencia aparente debe considerarse?",
    "opciones": [
      "1,8¬†veces la potencia nominal de las l√°mparas",
      "La misma potencia nominal que las l√°mparas",
      "2,5¬†veces la potencia nominal de las l√°mparas",
      "0,5¬†veces la potencia nominal de las l√°mparas"
    ],
    "respuesta": "1,8¬†veces la potencia nominal de las l√°mparas",
    "explicacion": "ITC‚ÄëBT‚Äë09: Apartado 3 ¬´En el c√°lculo de las l√≠neas de alimentaci√≥n de alumbrado con l√°mparas de descarga se tomar√° como potencia aparente 1,8¬†veces la potencia nominal de las l√°mparas.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øcu√°l es la potencia m√≠nima que debe preverse por vivienda para electrificaci√≥n b√°sica?",
    "opciones": [
      "5¬†750¬†W con tensi√≥n de 230¬†V",
      "3¬†450¬†W con tensi√≥n de 127¬†V",
      "9¬†200¬†W con tensi√≥n de 230¬†V",
      "1¬†500¬†W con tensi√≥n de 12¬†V"
    ],
    "respuesta": "5¬†750¬†W con tensi√≥n de 230¬†V",
    "explicacion": "ITC‚ÄëBT‚Äë10: Aprtado 2.2 ¬´La potencia m√≠nima a prever en cada vivienda para electrificaci√≥n b√°sica ser√° de 5¬†750¬†W, con una tensi√≥n de 230¬†V. La potencia m√≠nima a prever para electrificaci√≥n elevada ser√° de 9¬†200¬†W.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øcu√°l de las siguientes afirmaciones caracteriza a las instalaciones de enlace?",
    "opciones": [
      "Discurren por las zonas de uso com√∫n del edificio y son propiedad del usuario",
      "Empiezan en el cuadro de distribuci√≥n interior y terminan en los aparatos receptores",
      "Se sit√∫an exclusivamente en la v√≠a p√∫blica y pertenecen a la compa√±√≠a suministradora",
      "Solo comprenden el cableado del interior de la vivienda"
    ],
    "respuesta": "Discurren por las zonas de uso com√∫n del edificio y son propiedad del usuario",
    "explicacion": "ITC‚ÄëBT‚Äë12: Apartado 1.1 ¬´Las instalaciones de enlace enlazan la caja general de protecci√≥n con la instalaci√≥n interior del usuario. Discurren por las zonas de uso com√∫n de los edificios y son propiedad del usuario.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬ød√≥nde se deben instalar preferentemente las cajas generales de protecci√≥n?",
    "opciones": [
      "En las fachadas exteriores de los edificios, en lugares de libre y permanente acceso",
      "En cualquier lugar interior sin acceso p√∫blico",
      "Dentro de cada vivienda en un lugar oculto",
      "En el tejado del edificio sin necesidad de se√±alizaci√≥n"
    ],
    "respuesta": "En las fachadas exteriores de los edificios, en lugares de libre y permanente acceso",
    "explicacion": "ITC‚ÄëBT‚Äë13: Apartado 1.1 ¬´Las cajas generales de protecci√≥n se instalar√°n preferentemente en las fachadas exteriores de los edificios en lugares de libre y permanente acceso.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© es la l√≠nea general de alimentaci√≥n?",
    "opciones": [
      "La l√≠nea que enlaza la caja general de protecci√≥n con la centralizaci√≥n de contadores",
      "El cable que alimenta el cuadro el√©ctrico interior de cada vivienda",
      "La derivaci√≥n individual de cada usuario",
      "La conexi√≥n entre el contador y los aparatos receptores"
    ],
    "respuesta": "La l√≠nea que enlaza la caja general de protecci√≥n con la centralizaci√≥n de contadores",
    "explicacion": "ITC‚ÄëBT‚Äë14: Apartado 1 ¬´La l√≠nea general de alimentaci√≥n es la que enlaza la caja general de protecci√≥n con la centralizaci√≥n de contadores.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© es la derivaci√≥n individual?",
    "opciones": [
      "La parte de la instalaci√≥n que, desde la l√≠nea general de alimentaci√≥n, alimenta la instalaci√≥n interior de cada usuario",
      "La conexi√≥n entre el contador y la red de distribuci√≥n",
      "La l√≠nea general que alimenta todas las viviendas del edificio",
      "Una derivaci√≥n de baja tensi√≥n situada en la v√≠a p√∫blica"
    ],
    "respuesta": "La parte de la instalaci√≥n que, desde la l√≠nea general de alimentaci√≥n, alimenta la instalaci√≥n interior de cada usuario",
    "explicacion": "ITC‚ÄëBT‚Äë15: Apartado 1  ¬´La derivaci√≥n individual es la parte de la instalaci√≥n que, desde la l√≠nea general de alimentaci√≥n, alimenta la instalaci√≥n interior de cada usuario.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© grado de protecci√≥n m√≠nimo deben tener los conjuntos de contadores en instalaciones interiores?",
    "opciones": [
      "IP¬†40 e IK¬†09",
      "IP¬†30 e IK¬†05",
      "IP¬†43 e IK¬†09",
      "IP¬†55 e IK¬†10"
    ],
    "respuesta": "IP¬†40 e IK¬†09",
    "explicacion": "ITC‚ÄëBT‚Äë16: Apartado 1 ¬´En instalaciones interiores, la centralizaci√≥n de contadores tendr√° como m√≠nimo un grado de protecci√≥n IP¬†40 e IK¬†09; para instalaciones en el exterior, el grado de protecci√≥n m√≠nimo ser√° IP¬†43 e IK¬†09.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬ød√≥nde deben situarse los dispositivos generales de mando y protecci√≥n de cada usuario?",
    "opciones": [
      "Lo m√°s cerca posible del origen de la derivaci√≥n individual",
      "A mitad del recorrido de la derivaci√≥n individual",
      "En el √∫ltimo circuito interior de la vivienda",
      "En la centralizaci√≥n de contadores de la compa√±√≠a suministradora"
    ],
    "respuesta": "Lo m√°s cerca posible del origen de la derivaci√≥n individual",
    "explicacion": "ITC‚ÄëBT‚Äë17: Apartado 1.1 ¬´Los dispositivos generales de mando y protecci√≥n se situar√°n lo m√°s cerca posible del origen de la derivaci√≥n individual.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øc√≥mo se define la puesta a tierra?",
    "opciones": [
      "La uni√≥n el√©ctrica directa mediante conductores y sin fusibles entre las masas y un electrodo o conjunto de electrodos enterrados en el suelo",
      "La conexi√≥n de los conductores activos entre s√≠ para equilibrar tensiones",
      "La instalaci√≥n de un transformador aislado del suelo",
      "El empleo de dispositivos electr√≥nicos para limitar la corriente"
    ],
    "respuesta": "La uni√≥n el√©ctrica directa mediante conductores y sin fusibles entre las masas y un electrodo o conjunto de electrodos enterrados en el suelo",
    "explicacion": "ITC‚ÄëBT‚Äë18: Apartado 2 ¬´La puesta a tierra es la uni√≥n el√©ctrica directa mediante conductores y sin fusibles entre las masas y un electrodo o conjunto de electrodos enterrados en el suelo.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øcon qu√© color debe identificarse el conductor neutro?",
    "opciones": [
      "Azul claro",
      "Verde y amarillo",
      "Marr√≥n",
      "Negro"
    ],
    "respuesta": "Azul claro",
    "explicacion": "ITC‚ÄëBT‚Äë19: Apartado 2.2.4 ¬´El conductor neutro debe identificarse con el color azul claro.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øpueden instalarse en un mismo tubo los circuitos de potencia y los circuitos de muy baja tensi√≥n de seguridad (MBTS) o de protecci√≥n (MBTP)?",
    "opciones": [
      "Solo cuando cada cable tenga aislamiento adecuado para la tensi√≥n m√°s elevada o se dispongan separadores que garanticen el aislamiento requerido",
      "S√≠, siempre sin restricciones",
      "No, en ning√∫n caso",
      "√önicamente si el tubo es met√°lico y enterrado"
    ],
    "respuesta": "Solo cuando cada cable tenga aislamiento adecuado para la tensi√≥n m√°s elevada o se dispongan separadores que garanticen el aislamiento requerido",
    "explicacion": "ITC‚ÄëBT‚Äë20: Apartado 2.1 ¬´Los circuitos de potencia y los circuitos de muy baja tensi√≥n de seguridad (MBTS) o muy baja tensi√≥n de protecci√≥n (MBTP) no deben instalarse en los mismos tubos o canales, a menos que cada cable tenga un aislamiento adecuado para la tensi√≥n m√°s elevada o se dispongan separadores que aseguren el aislamiento requerido.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øc√≥mo deben ser las superficies interiores de los tubos protectores de conductores?",
    "opciones": [
      "No deben presentar aristas, rugosidades ni grietas que puedan da√±ar los cables o lesionar a los instaladores",
      "Deben ser rugosas para facilitar el agarre de los cables",
      "Pueden tener cualquier tipo de imperfecci√≥n siempre que sean met√°licos",
      "Deben estar recubiertas de pintura aislante"
    ],
    "respuesta": "No deben presentar aristas, rugosidades ni grietas que puedan da√±ar los cables o lesionar a los instaladores",
    "explicacion": "ITC‚ÄëBT‚Äë21: Apartado 1.1 ¬´Las superficies interiores de los tubos protectores y dem√°s dispositivos huecos en los que se alojan conductores no deben presentar aristas, rugosidades ni grietas que puedan da√±ar los cables o lesionar a los instaladores.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© dispositivo puede utilizarse para proteger un circuito contra sobreintensidades?",
    "opciones": [
      "Un interruptor autom√°tico omnipolar con curva t√©rmica adecuada o fusibles calibrados",
      "Un interruptor diferencial de alta sensibilidad exclusivamente",
      "Un interruptor manual sin curva de disparo",
      "Una toma de tierra suplementaria"
    ],
    "respuesta": "Un interruptor autom√°tico omnipolar con curva t√©rmica adecuada o fusibles calibrados",
    "explicacion": "ITC‚ÄëBT‚Äë22: Apartado 1.1 ¬´La protecci√≥n contra sobreintensidades de cada circuito se realizar√° mediante un interruptor autom√°tico omnipolar con curva t√©rmica adecuada o por fusibles calibrados.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øpara qu√© sirven las categor√≠as de sobretensiones?",
    "opciones": [
      "Para distinguir los diferentes grados de resistencia a las sobretensiones y lograr la coordinaci√≥n de los aislamientos",
      "Para clasificar los colores de los cables seg√∫n su tensi√≥n",
      "Para elegir la secci√≥n de los conductores en funci√≥n de la intensidad",
      "Para determinar la frecuencia nominal de la red"
    ],
    "respuesta": "Para distinguir los diferentes grados de resistencia a las sobretensiones y lograr la coordinaci√≥n de los aislamientos",
    "explicacion": "ITC‚ÄëBT‚Äë23: Apartado 2.1 ¬´Las categor√≠as de sobretensiones permiten distinguir los diferentes grados de resistencia a las sobretensiones para lograr la coordinaci√≥n de los aislamientos; indican tambi√©n la tensi√≥n m√°xima residual que puede aparecer en la instalaci√≥n una vez eliminada la sobretensi√≥n.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øcu√°l de las siguientes opciones es un medio de protecci√≥n contra contactos directos?",
    "opciones": [
      "El aislamiento de las partes activas",
      "La conexi√≥n de las masas a tierra",
      "Pintar los cables con barnices aislantes √∫nicamente",
      "Instalar un limitador de sobretensiones transitorias"
    ],
    "respuesta": "El aislamiento de las partes activas",
    "explicacion": "ITC‚ÄëBT‚Äë24: Apartado 3 ¬´Los medios para la protecci√≥n contra contactos directos son: el aislamiento de las partes activas, las barreras o envolventes, los obst√°culos, la colocaci√≥n fuera del alcance y la protecci√≥n complementaria mediante dispositivos de corriente diferencial‚Äëresidual.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øcu√°l es la intensidad nominal m√≠nima del interruptor autom√°tico general en una instalaci√≥n de car√°cter privado?",
    "opciones": [
      "25¬†A",
      "10¬†A",
      "40¬†A",
      "16¬†A"
    ],
    "respuesta": "25¬†A",
    "explicacion": "ITC‚ÄëBT‚Äë25: Apartado 2.1 ¬´En las instalaciones de car√°cter privado el circuito de protecci√≥n general estar√° dotado de un interruptor autom√°tico general con mando manual y una intensidad nominal m√≠nima de 25¬†A, independiente del interruptor de control de potencia.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© medida de puesta a tierra debe aplicarse en todo edificio de nueva construcci√≥n?",
    "opciones": [
      "Instalar un conductor de cobre desnudo formando un anillo cerrado en las zanjas de cimentaci√≥n",
      "Colocar una pica de acero galvanizado sin conexi√≥n a las armaduras",
      "Utilizar √∫nicamente el cable neutro como toma de tierra",
      "Evitar cualquier conexi√≥n a tierra en edificios nuevos"
    ],
    "respuesta": "Instalar un conductor de cobre desnudo formando un anillo cerrado en las zanjas de cimentaci√≥n",
    "explicacion": "ITC‚ÄëBT‚Äë26: Apartado 3.1 ¬´En todo edificio de nueva construcci√≥n se instalar√° un conductor de cobre desnudo de rigidez suficiente de secci√≥n m√≠nima la indicada en la ITC‚ÄëBT‚Äë18, enterrado en las zanjas de cimentaci√≥n formando un anillo cerrado que rodee el per√≠metro del edificio.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, en una ducha sin plato, ¬øc√≥mo se define el volumen¬†0?",
    "opciones": [
      "Est√° limitado por el suelo y un plano horizontal situado a 0,05¬†m por encima, en un radio de 1,20¬†m alrededor del punto de salida del agua",
      "Comprende todo el cuarto de ba√±o sin excepci√≥n",
      "Es la zona situada a m√°s de 2¬†m del suelo",
      "Corresponde solamente al recinto del inodoro"
    ],
    "respuesta": "Est√° limitado por el suelo y un plano horizontal situado a 0,05¬†m por encima, en un radio de 1,20¬†m alrededor del punto de salida del agua",
    "explicacion": "ITC‚ÄëBT‚Äë27: Apartado 2.1.1 ¬´En una ducha sin plato, el volumen¬†0 est√° limitado por el suelo y un plano horizontal situado a 0,05¬†m por encima de √©l, en un radio de 1,20¬†m alrededor del punto de salida del agua cuando el difusor pueda moverse.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© tiempo m√°ximo define la categor√≠a de alimentaci√≥n autom√°tica ‚Äòcon corte muy breve‚Äô en servicios de seguridad?",
    "opciones": [
      "0,15¬†segundos",
      "0,50¬†segundos",
      "15¬†segundos",
      "No admite ning√∫n corte"
    ],
    "respuesta": "0,15¬†segundos",
    "explicacion": "ITC‚ÄëBT‚Äë28: Apartado 2 ¬´Se denomina alimentaci√≥n autom√°tica con corte muy breve cuando est√° disponible en un tiempo m√°ximo de 0,15¬†segundos; con corte breve cuando est√° disponible en un m√°ximo de 0,5¬†segundos; con corte mediano cuando est√° disponible en un m√°ximo de 15¬†segundos; y sin corte cuando no se produce interrupci√≥n.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øc√≥mo se caracterizan los locales h√∫medos?",
    "opciones": [
      "Por la presencia de condensaciones sobre techos o paredes y huellas de salitre o moho, aun sin aparecer gotas",
      "Por contener grandes cantidades de agua en el suelo de forma permanente",
      "Por tener siempre superficies totalmente secas",
      "Por contar con calefacci√≥n el√©ctrica en todas las paredes"
    ],
    "respuesta": "Por la presencia de condensaciones sobre techos o paredes y huellas de salitre o moho, aun sin aparecer gotas",
    "explicacion": "ITC‚ÄëBT‚Äë30: Apartado 1 ¬´Se consideran locales h√∫medos aquellos en los que se producen condensaciones sobre los techos o paredes, as√≠ como huellas de salitre o moho aun cuando no lleguen a aparecer gotas.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© √°rea corresponde al volumen¬†0 en una piscina o pediluvio?",
    "opciones": [
      "El interior de las cubetas o recipientes de piscinas y pediluvios, as√≠ como tinas de hidromasaje e inyectores de agua",
      "El espacio comprendido a 2¬†m alrededor de la piscina",
      "Solo la zona del borde exterior de la piscina",
      "Toda el √°rea del recinto deportivo donde se encuentra la piscina"
    ],
    "respuesta": "El interior de las cubetas o recipientes de piscinas y pediluvios, as√≠ como tinas de hidromasaje e inyectores de agua",
    "explicacion": "ITC‚ÄëBT‚Äë31: Apartado 2.1 ¬´El volumen¬†0 comprende el interior de las cubetas o recipientes de piscinas y pediluvios, as√≠ como las tinas de hidromasaje y los inyectores de agua.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© debe permitir el interruptor general manual omnipolar instalado en maquinaria de elevaci√≥n y transporte?",
    "opciones": [
      "Poner fuera de servicio toda la instalaci√≥n, estar situado a nivel del suelo, ser de f√°cil acceso y claramente se√±alizado",
      "Solo accionar la m√°quina a distancia mediante mando a distancia",
      "√önicamente cortar la alimentaci√≥n de iluminaci√≥n interior",
      "Funcionamiento autom√°tico sin posibilidad de accionamiento manual"
    ],
    "respuesta": "Poner fuera de servicio toda la instalaci√≥n, estar situado a nivel del suelo, ser de f√°cil acceso y claramente se√±alizado",
    "explicacion": "ITC‚ÄëBT‚Äë32: Apartado 2 ¬´La instalaci√≥n podr√° ser puesta fuera de servicio mediante un interruptor general manual omnipolar instalado en el circuito principal. Este interruptor se situar√° a nivel del suelo o planta baja, ser√° de f√°cil acceso, estar√° en el mismo local que la m√°quina y claramente se√±alizado.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øa qu√© instalaciones se aplica la ITC-BT-33?",
    "opciones": [
      "A instalaciones provisionales y temporales de obras",
      "Solo a instalaciones fijas de viviendas unifamiliares",
      "A instalaciones temporales de ferias y exposiciones",
      "A instalaciones en locales agr√≠colas y ganaderos"
    ],
    "respuesta": "A instalaciones provisionales y temporales de obras",
    "explicacion": "ITC‚ÄëBT‚Äë33: ¬´La presente Instrucci√≥n se aplica a instalaciones temporales destinadas a la construcci√≥n de edificios de nueva planta, reparaci√≥n, modificaci√≥n, ampliaci√≥n o demolici√≥n de edificios existentes, obras p√∫blicas, excavaciones y trabajos similares.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© tipo de instalaciones aborda la Instrucci√≥n T√©cnica de ferias y alumbrados festivos?",
    "opciones": [
      "Instalaciones el√©ctricas temporales de ferias, exposiciones, muestras, stands y alumbrados festivos de v√≠as p√∫blicas",
      "Instalaciones fijas de viviendas particulares",
      "Sistemas de automatizaci√≥n dom√©stica",
      "Estaciones de recarga de veh√≠culos el√©ctricos"
    ],
    "respuesta": "Instalaciones el√©ctricas temporales de ferias, exposiciones, muestras, stands y alumbrados festivos de v√≠as p√∫blicas",
    "explicacion": "ITC‚ÄëBT‚Äë34: Apartado 1 ¬´Esta Instrucci√≥n se aplica a las instalaciones el√©ctricas temporales de ferias, exposiciones, muestras, stands y alumbrados festivos de v√≠as p√∫blicas.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øa qu√© establecimientos se aplica la ITC-BT-35?",
    "opciones": [
      "A establecimientos agr√≠colas y hort√≠colas",
      "A los locales de publica concurrencia",
      "A los locales de caracteristicas especiales",
      "A la infraestructura para la recarga de veh√≠culos el√©ctricos"
    ],
    "respuesta": "A establecimientos agr√≠colas y hort√≠colas",
    "explicacion": "ITC‚ÄëBT‚Äë35: ¬´Esta instrucci√≥n se aplica a las instalaciones fijas de los establecimientos agr√≠colas y hort√≠colas en los que se alojan animales, tales como establos, graneros, salas de orde√±o, silos y almacenes, quedando excluidos los locales habitables.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© l√≠mite de tensi√≥n nominal no deben sobrepasar las instalaciones de muy baja tensi√≥n de seguridad (MBTS)?",
    "opciones": [
      "50¬†V en corriente alterna o 75¬†V en corriente continua",
      "127¬†V en corriente alterna o 250¬†V en corriente continua",
      "500¬†V en corriente alterna o 750¬†V en corriente continua",
      "12¬†V en corriente alterna o 24¬†V en corriente continua"
    ],
    "respuesta": "50¬†V en corriente alterna o 75¬†V en corriente continua",
    "explicacion": "ITC‚ÄëBT‚Äë36: Apartado 1 ¬´Instalaciones de muy baja tensi√≥n de seguridad (MBTS): instalaciones en las que la tensi√≥n nominal no excede de 50¬†V en corriente alterna o de 75¬†V en corriente continua, alimentadas por fuentes de seguridad tales como transformadores de separaci√≥n o convertidores electr√≥nicos, en los que los circuitos est√°n aislados y no se conectan a tierra.¬ª"
  },
  {
    "pregunta": "Seg√∫n el REBT, ¬øqu√© tensi√≥n asignada m√≠nima deben tener los cables empleados en instalaciones de tensi√≥n especial?",
    "opciones": [
      "No inferior a 1.000¬†V",
      "No inferior a 500¬†V",
      "No inferior a 250¬†V",
      "No inferior a 3.000¬†V"
    ],
    "respuesta": "No inferior a 1.000¬†V",
    "explicacion": "ITC‚ÄëBT‚Äë37: ¬´Los cables utilizados en estas instalaciones deber√°n tener una tensi√≥n asignada no inferior a 1.000¬†V y se aplicar√° a las envolventes y masas uno de los sistemas de protecci√≥n previstos en la ITC‚ÄëBT‚Äë24.¬ª"
  }
];











    /* ===== Estado ===== */
    let preguntasAleatorias = [];
    let indice = 0, aciertos = 0, errores = 0;
    let historial = [];
    let seleccionUsuario = null;
    let respondido = false;

// Tiempo del examen
const DURACION_MIN = 120;          // Duraci√≥n total en minutos (2 horas)
const DURACION_SEG = DURACION_MIN * 60;

let inicioTiempo = null;
let intervaloTiempo = null;
let tiempoAgotado = false;


    /* ===== Utilidades ===== */
    const mezclar = (arr) => { for (let i = arr.length-1; i>0; i--) { const j = Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; };

    function mezclarPreguntas(){
      preguntasAleatorias = mezclar(preguntas.map(p=>({...p, opciones: mezclar([...p.opciones]) })));
      indice=0; aciertos=0; errores=0; historial=[];
    }

    const fmt2 = (n) => String(n).padStart(2,'0');
    const clamp0 = (x) => x < 0 ? 0 : x;

    function calcularPuntuacion(){
      const total = preguntasAleatorias.length;
      const penalizacion = Math.floor(errores / 2);
      const validasNetas = Math.max(0, aciertos - penalizacion);
      const puntos = validasNetas * 0.5;
      const porcentaje = clamp0((validasNetas / total) * 100);
      const apto = porcentaje >= 80;
      return { total, respondidas: aciertos+errores, enBlanco: total-(aciertos+errores), penalizacion, validasNetas, puntos, porcentaje, apto };
    }

    /* ===== Render ===== */
    function setProgreso(){
      const total = preguntasAleatorias.length;
      const pct = Math.round((indice/total)*100);
      const bar = document.getElementById('progress-bar');
      bar.style.width = pct + '%';
      bar.setAttribute('aria-valuenow', pct);
      document.getElementById('progress-txt').textContent = `${indice}/${total}`;
    }

    function actualizarContador(){
      if (!inicioTiempo) return;
      const transcurrido = Math.floor((Date.now()-inicioTiempo)/1000);
      const restantes = Math.max(0, DURACION_SEG - transcurrido);
      const mm = fmt2(Math.floor(restantes/60));
      const ss = fmt2(restantes%60);

      const { puntos } = calcularPuntuacion();
      const totalPuntos = preguntasAleatorias.length * 0.5;

      const relojClass =
        restantes <= 60 ? 'text-red-700' :
        restantes <= 5*60 ? 'text-orange-600' :
        'text-blue-700';

      document.getElementById("contador").innerHTML = `
        <span>Cuesti√≥n: ${indice + 1}/${preguntasAleatorias.length}</span>
        <span class="text-green-600">Aciertos: ${aciertos}</span>
        <span class="text-red-600">Fallos: ${errores}</span>
        <span>Puntos: ${puntos.toFixed(2)} / ${totalPuntos.toFixed(2)}</span>
        <span class="font-mono ${relojClass}">‚è≥ ${mm}:${ss}</span>`;

      if (restantes === 0 && !tiempoAgotado){
        tiempoAgotado = true;
        clearInterval(intervaloTiempo);
        deshabilitarInteraccion();
        abrirModalFin();
      }
    }

    function renderOpciones(opciones){
      const cont = document.getElementById("opciones");
      cont.innerHTML = "";
      opciones.forEach((op, i)=>{
        const btn = document.createElement("button");
        btn.type="button";
        btn.dataset.valor = op;
        btn.className="opcion w-full text-left bg-blue-600 hover:bg-blue-700 text-white px-5 py-3 rounded-xl shadow transition focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-blue-300";
        btn.innerHTML = `<span class="font-semibold tracking-wide">${op}</span>`;
        btn.onclick = ()=>seleccionarOpcion(op);
        btn.setAttribute('aria-label',`Opci√≥n ${i+1}: ${op}`);
        cont.appendChild(btn);
      });
    }

    function cargarPregunta(){
      if (indice>=preguntasAleatorias.length) return mostrarResumen();
      const q = preguntasAleatorias[indice];
      seleccionUsuario=null; respondido=false;
      document.getElementById("pregunta").textContent = q.pregunta;
      renderOpciones(q.opciones);

      document.getElementById("acciones").innerHTML =
        `<div class="flex items-center justify-between mt-4 text-sm text-slate-500">
           <span>Elige una respuesta (teclas 1‚Äì4 y Enter).</span>
           <button disabled id="btn-contestar" class="opacity-50 cursor-not-allowed bg-slate-800 text-white px-4 py-2 rounded-lg">Contestar</button>
         </div>`;

      setProgreso();
      actualizarContador();
    }

    function seleccionarOpcion(opcion){
      if (respondido || tiempoAgotado) return;
      seleccionUsuario = opcion;
      document.querySelectorAll("#opciones .opcion").forEach(b=>{
        b.classList.remove('ring','ring-yellow-300','translate-y-0.5');
        if (b.dataset.valor===opcion) b.classList.add('ring','ring-yellow-300','translate-y-0.5');
      });
      const btn = document.getElementById('btn-contestar');
      btn.disabled=false;
      btn.classList.remove('opacity-50','cursor-not-allowed');
      btn.onclick=verificarRespuesta;
    }

    function verificarRespuesta(){
      if (respondido || !seleccionUsuario || tiempoAgotado) return;
      const actual = preguntasAleatorias[indice];
      const ok = seleccionUsuario===actual.respuesta;
      respondido = true;

      document.querySelectorAll("#opciones .opcion").forEach(b=>{
        b.disabled=true; b.classList.remove('ring','ring-yellow-300');
        const val=b.dataset.valor;
        if (val===actual.respuesta){
          b.classList.add('bg-green-600','hover:bg-green-700');
          b.innerHTML=`‚úÖ <span class="font-semibold">${val}</span>`;
        } else if (val===seleccionUsuario && !ok){
          b.classList.add('bg-red-600','hover:bg-red-700');
          b.innerHTML=`‚ùå <span class="font-semibold">${val}</span>`;
        } else {
          b.classList.add('bg-blue-500');
        }
      });

      ok ? aciertos++ : errores++;

      historial.push({
        pregunta:actual.pregunta,
        opciones:actual.opciones,
        correcta:actual.respuesta,
        elegida:seleccionUsuario,
        explicacion:actual.explicacion
      });

      /* === NUEVO: mostrar la explicaci√≥n debajo del bot√≥n === */
      document.getElementById("acciones").innerHTML =
        `<div class="mt-4 flex flex-col gap-3">

           <div class="flex items-center justify-end">
             <button onclick="siguientePregunta()" class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg shadow">
               Siguiente
             </button>
           </div>

           <div id="explicacion" class="text-sm text-slate-700 bg-slate-100 border-l-4 border-blue-600 p-3 rounded-md">
             ${actual.explicacion || "Sin referencia disponible"}
           </div>

         </div>`;

      actualizarContador();
      setProgreso();
    }

    const siguientePregunta = ()=>{ if (!tiempoAgotado){ indice++; cargarPregunta(); } };

    function deshabilitarInteraccion(){
      document.querySelectorAll("#opciones .opcion").forEach(b=>{ b.disabled=true; });
      document.getElementById('btn-contestar')?.setAttribute('disabled','true');
      document.removeEventListener('keydown', handleKey);
    }

    function abrirModalFin(){
      const { total, respondidas, enBlanco, penalizacion, validasNetas, puntos, porcentaje, apto } = calcularPuntuacion();
      const modal = document.getElementById('modal-fin');
      const totalPuntos = total * 0.5;
      document.getElementById('modal-resumen').innerHTML = `
        <p class="text-slate-700">Respondidas: <strong>${respondidas}</strong> ‚Ä¢ En blanco: <strong>${enBlanco}</strong> ‚Ä¢ Total: ${total}</p>
        <p class="text-slate-700">Aciertos: <strong class="text-green-700">${aciertos}</strong> ‚Ä¢ Fallos: <strong class="text-red-700">${errores}</strong></p>
        <p class="text-slate-700">Penalizaci√≥n aplicada: <strong>-${penalizacion}</strong> v√°lidas</p>
        <p class="text-slate-700">V√°lidas netas: <strong>${validasNetas}</strong></p>
        <p class="text-slate-700">Puntuaci√≥n: <strong>${puntos.toFixed(2)} / ${totalPuntos.toFixed(2)}</strong> (<strong>${porcentaje.toFixed(2)}%</strong>)</p>
        <p class="${apto?'text-emerald-700':'text-red-700'} font-bold text-lg mt-1">${apto?'APTO ‚úÖ':'NO APTO ‚ùå'}</p>
      `;
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }

    function mostrarResumen(){
      clearInterval(intervaloTiempo);
      const total = preguntasAleatorias.length;
      const transcurrido = Math.floor((Date.now()-inicioTiempo)/1000);
      const mm = fmt2(Math.floor(transcurrido/60));
      const ss = fmt2(transcurrido%60);

      const { penalizacion, validasNetas, puntos, porcentaje, apto } = calcularPuntuacion();

      const detalle = historial.map(h=>`
        <div class='mb-2 border border-slate-200 rounded-lg p-3'>
          <p class='font-semibold mb-2'>${h.pregunta}</p>
          <div class='flex flex-wrap gap-2'>
            ${h.opciones.map(op=>{
              if (op===h.elegida && op===h.correcta)
                return `<span class='bg-green-100 text-green-900 px-2.5 py-1 rounded-md'>‚úÖ ${op}</span>`;
              if (op===h.elegida && op!==h.correcta)
                return `<span class='bg-red-100 text-red-900 px-2.5 py-1 rounded-md'>‚ùå ${op}</span>`;
              if (op===h.correcta && op!==h.elegida)
                return `<span class='bg-emerald-50 text-emerald-800 px-2.5 py-1 rounded-md'>‚úî ${op}</span>`;
              return `<span class='px-2.5 py-1 rounded-md bg-slate-50'>${op}</span>`;
            }).join('')}
          </div>
          <div class='mt-2 text-sm text-slate-600 bg-slate-100 border-l-4 border-blue-600 p-2 rounded-md'>
            üìò Explicaci√≥n: ${h.explicacion}
          </div>
        </div>
      `).join('');

      const totalPuntos = total * 0.5;

      document.getElementById("test").innerHTML = `
        <div class="space-y-3">
          <h2 class="text-2xl font-extrabold">Resultado del test 
            <span class="${apto?'text-emerald-700':'text-red-700'} text-xl align-middle">
              (${apto?'APTO ‚úÖ':'NO APTO ‚ùå'})
            </span>
          </h2>

          <p class="text-slate-700">
            Aciertos: <strong class="text-green-700">${aciertos}</strong> ‚Ä¢ 
            Fallos: <strong class="text-red-700">${errores}</strong> ‚Ä¢ 
            Penalizaci√≥n: <strong>-${penalizacion}</strong>
          </p>

          <p class="text-slate-700">
            V√°lidas netas: <strong>${validasNetas}</strong> / ${total} ‚Ä¢ 
            Puntuaci√≥n: <strong>${puntos.toFixed(2)} / ${totalPuntos.toFixed(2)}</strong> 
            (<strong>${porcentaje.toFixed(2)}%</strong>)
          </p>

          <p class="text-slate-700">Tiempo empleado: <span class="font-mono">${mm}:${ss}</span></p>

          <hr class="my-3 border-slate-200">

          <h3 class="text-lg font-bold">Detalle de preguntas</h3>

          <div class="max-h-[50vh] overflow-auto pr-1">
            ${detalle}
          </div>
        </div>

        <div class="flex flex-wrap items-center justify-center gap-3 mt-6">
          <button onclick="window.location.reload()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-2 rounded-lg shadow">
            Volver a intentar
          </button>
          <a href="index.html" class="bg-slate-700 hover:bg-slate-800 text-white px-5 py-2 rounded-lg shadow">
            Volver al inicio
          </a>
        </div>`;
    }

    /* ===== Atajos de teclado ===== */
    function handleKey(e){
      if (tiempoAgotado) return;
      if (respondido){ if (e.key==='Enter') siguientePregunta(); return; }
      const map={'1':0,'2':1,'3':2,'4':3};
      if (map[e.key]!==undefined){
        const b=document.querySelectorAll('#opciones .opcion')[map[e.key]];
        if (b) b.click();
      }
      if (e.key==='Enter'){
        const b=document.getElementById('btn-contestar');
        if (b && !b.disabled) b.click();
      }
    }

    window.onload = ()=>{
      mezclarPreguntas();
      inicioTiempo = Date.now();
      cargarPregunta();
      intervaloTiempo = setInterval(actualizarContador, 1000);
      document.addEventListener('keydown', handleKey);
    };
  </script>

</head>

<body class="bg-gray-100 text-gray-900 p-4">
  <div class="max-w-3xl mx-auto bg-white p-6 md:p-8 rounded-2xl shadow-lg ring-1 ring-slate-100" id="test">
    <div class="mb-4">
      <div class="flex items-center justify-between text-sm text-slate-600 mb-2">
        <p id="contador" class="font-semibold space-x-4"></p>
        <span id="progress-txt" class="font-mono text-slate-500">0/0</span>
      </div>
      <div class="w-full bg-slate-200 rounded-full h-2.5 overflow-hidden">
        <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-out" style="width:0%" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
      </div>
    </div>

    <h1 class="text-3xl font-extrabold mb-3 text-center">TEST REBT</h1>
    <p id="pregunta" class="mb-4 text-lg text-center"></p>

    <div id="opciones" class="flex flex-col gap-3"></div>
    <div id="acciones" class="mt-2"></div>
  </div>

  <div class="mt-6 text-center">
    <a href="Test_completos_REBT.html" class="inline-block bg-gray-700 hover:bg-gray-900 text-white px-6 py-2 rounded-lg shadow">Cancelar</a>
  </div>

  <!-- Modal Tiempo Agotado -->
  <div id="modal-fin" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50 p-4">
    <div class="bg-white rounded-2xl shadow-xl max-w-lg w-full p-6">
      <h2 class="text-2xl font-extrabold mb-1">‚è∞ Tiempo agotado</h2>
      <p class="text-slate-600 mb-4">Tu tiempo se ha agotado. Estos son tus resultados:</p>
      <div id="modal-resumen" class="space-y-1 text-slate-800"></div>
      <div class="mt-6 flex justify-end">
        <button onclick="window.location.reload()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-5 py-2 rounded-lg shadow">Volver a intentar</button>
      </div>
    </div>
  </div>

</body>
</html>
